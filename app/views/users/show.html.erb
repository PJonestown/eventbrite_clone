<div class = 'container'>
  <div class = 'row'>
    <div class = 'col-sm-offset-2 col-sm-8'>
      <h1><%= @user.username %></h1>

      <h3>Upcoming events</h3>
      <% if @upcoming_happenings.any? %>
        <% @upcoming_happenings.map(&:date).uniq.each do |date| %>
          <h3><%= date.to_formatted_s(:short) %></h3>
          <% happenings = @upcoming_happenings.select { |happening| happening.date == date } %>
            <% happenings.each do |happening| %>
              <p><%= link_to happening.name, happening %></p>
            <% end %>
          <% end %>
      <% else %>
        <p> No upcoming happenings </p>
      <% end %>


      <h3>Previously attended events</h3>
      <% if @past_happenings.any? %>
        <% @past_happenings.map(&:date).uniq.each do |date| %>
          <h3><%= date.to_formatted_s(:short) %></h3>
          <% happenings = @past_happenings.select { |happening| happening.date == date } %>
            <% happenings.each do |happening| %>
              <p><%= link_to happening.name, happening %></p>
            <% end %>
          <% end %>
      <% else %>
        <p> No past happenings </p>
      <% end %>

      <%= link_to 'Edit', edit_user_path(@user) %>
      <%= link_to 'Edit Location', edit_user_address_path(@user, @user.address) %>

    </div>
  </div>
</div>
